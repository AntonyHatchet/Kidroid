//
   Created by anton_gorshenin on 24.04.2015.
extends layout
block content
    //#{devices}
    //#{devices._id.device_id}
    #header
        #logo
        #usermenu
            #username


    #tab
        ul(class='tabs')
            li(class='tab-link current' data-tab='devices') Devices
            li(class='tab-link' data-tab='users') Users
            li(class='tab-link' data-tab='filters') Filters
            li(class='tab-link' data-tab='settings') Settings
    #conteiner



        #maps
            script.
                var map = L.map('maps').setView([55.7422, 37.5719], 1);
                // add an OpenStreetMap tile layer
                L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);
                // add a marker in the given location, attach some popup content to it and open the popup
                var mark = L.marker([55.7422, 37.5719]);
                mark.addTo(map)
                        .bindPopup('“ÛÚ')
                        .openPopup();
        #devices(class='tab-content current')
            #filter
                form(class='form-search')
                    input(type="text" id="DeviceNameIDSerial" class='input-medium search-query input-xlarge' placeholder='Device name/ID/Serial' onkeyup="find()")
                    select(id='selectStatus' onchange="find()")
                        option(value="") Select status
                        option(value='0') Ofline
                        option(value='1') Online
                    select(id="selectCategory" onchange="find()")
                    select(id="selectVersion" onchange="find()")


            #add-device
                a(href='#add')
                    button(class='btn btn-primary') add new device

            table(class='table table-hover table-bordered' id='paged')
                thead(id='target')
                    tr
                        th id
                        th registered
                        th school
                        th apk_version
                        th map
                        th remove

                tbody(id='deviceTable')
            div(id='pagination' class='pagination pagination-centered')
            a(class='overlay', id='add', href='#x')
            .popap-add
                p Add new device
                form
                    p School
                    select(id="addSelectCategory")
                    br
                    p Version
                    select(id="addSelectVersion")
                    br
                    p Amount
                    input(id='amountDevice' type="number", name='number' min="1" value='1')

                    br
                    button(type="button" onclick='addDevice()') Add
                a(class='close-add' href='#close-add')



                a(class='close-add' href='#close-add')
            script.
                function showmap(i, j) {
                    mark.setLatLng(L.latLng(i, j)).update()
                            .bindPopup('“ÛÚ')
                            .openPopup();
                }
            script(src="/js/socketTableData.js")

        #filters(class='tab-content')
            #add-category
                a(href='#createCategory')
                    button(class='btn btn-primary') add new category...
            table(class='table table-hover table-bordered')
                thead
                    tr
                        th(colspan='2') Category name
                tbody(id='tableFilter')


            a(class='overlay', id='createCategory', href='#x')
            .popap-add
                p Add new category:
                form(action='/createDevice')

                    input(type="input" id="newCategory" name='category')
                    button(type="button" onclick="createNewCategory()") Add
                p Add new Apk version:
                form(method="post" action='/uploadFile' enctype="multipart/form-data")

                    input(type="file", name='category' value='')
                    button( type="submit") Add
                a(class='close-add' href='#close-add')

            a(class='overlay', id='editCategory', href='#x')
            .popap-add
                p Edit category:
                form
                    input(type="input" name='category')
                    //button( type="button" onclick="socket.emit('editCategory')") Edit

                a(class='close-add' href='#close-add')

        #users(class='tab-content')
            table(class='table table-hover table-bordered')
                thead
                    tr
                        th id
                        th name
                tbody(id='userTable')

